{"name":"Weixin admin","tagline":"微信公众平台的辅助管理脚本","body":"weixin_admin\r\n============\r\n\r\n微信公众平台的辅助管理脚本集\r\n\r\n\r\nmaterials.php\r\n-------------\r\n\r\n用于通过海外微信公众管理平台获取微信推送的文章访问量数据。\r\n\r\n### 需要的模块\r\n\r\n* curl\r\n* mysql\r\n\r\n### 使用方式\r\n\r\n* 上传文件到WEB，浏览器直接运行，会显示一页（10个消息）的文章的访问数据信息\r\n* 在URL后面加上参数 ?page=-1 可以显示全部页的所有文章的访问数据信息\r\n* 也可以在显示一页后，点击页面尾部的链接来显示更多：\r\n  * next page 显示下一页\r\n  * next total page 显示剩余页面的\r\n  * total page 显示*全部*页面的（包括当前已经显示的第一页）\r\n\r\n### 配置\r\n\r\n虽然可以直接修改materials.php，但是不建议这样做。可以修改materials_conf.php 其中设置的变量会覆盖materials.php里面全局设置。\r\n\r\n主要需要设置的变量有：\r\n\r\n* 数据库设置\r\n  * 用于将访问数据记录到数据库中。如果不设置数据库配置，则忽略数据记录的动作。设置数据库，也可以提示两次更新间隔之间的数据变化幅度\r\n* 公众平台的管理员账号\r\n  * 可以将公众平台的管理员账号信息设置写入。如果不设置，则会在运行时通过HTTP认证方式提示输入账号信息，该信息会保持在浏览器内存中，直到关闭浏览器。\r\n* 服务器端用于记录COOKIE的文件夹\r\n  * 由于本脚本实际上是模拟了用户登录行为（通过CURL），所以需要在服务器端支持cookie信息的存储和读取，因此需要设置一个目录可以创建相应的文件创建和访问。\r\n  * 一般这个目录是 /tmp (Linux下)，当然根据你的PHP设置不同，也可能是其它目录，比如上载文件的临时目录。如果不设置，脚本会自动尝试使用上载文件的临时目录。\r\n  \r\n### 数据库存储\r\n\r\n如果需要通过数据库存储访问数据，可以通过以下语句创建数据表（或参见database.sql），并如上设置数据库访问信息。\r\n\r\n\tCREATE TABLE `weixin_article` (\r\n\t\t`slave_user` varchar(32) not null default '',\r\n\t\t`appmsgid` int not null default 0,\r\n\t\t`itemidx` int not null default 1,\r\n\t\t`time` date not null default '0000-00-00',\r\n\t\t`img_url` varchar(250) not null default '',\r\n\t\t`title` varchar(100) not null default '',\r\n\t\t`desc` varchar(200) not null default '',\r\n\t\t`url` varchar(250) not null default '',\r\n\t\t`pageview` int not null default 0,\r\n\t\t`vistor` int not null default 0,\r\n\t\t`sent_date` int not null default 0,\r\n\t\tPRIMARY KEY `id` (`slave_user`,`appmsgid`,`itemidx`),\r\n\t\tKEY `time` (`time`),\r\n\t\tKEY `title` (`title`),\r\n\t\tKEY `pageview` (`pageview`),\r\n\t\tKEY `vistor` (`vistor`)\r\n\t) ENGINE=MyISAM DEFAULT CHARSET=utf8;\r\n\r\n\r\n\t\r\n  \r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}